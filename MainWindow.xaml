<Window x:Class="PROG7312.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Mascot AI" Height="450" Width="800"
        PreviewMouseLeftButtonDown="Window_MouseLeftButtonDown">

    <Grid>
        <!-- Top-level canvas (must allow layout & hit testing) -->
        <Canvas x:Name="MascotCanvas" Background="Transparent">

            <!-- A single layer which contains both the mascot image and the speech box.
                 Move this layer and everything inside follows. -->
            <Canvas x:Name="MascotLayer" Canvas.Left="26" Canvas.Top="324">

                <!-- Mascot image -->
                <Image x:Name="MascotImage"
                       Width="135" Height="102"
                       MouseLeftButtonDown="MascotImage_MouseLeftButtonDown"
                       HorizontalAlignment="Left" VerticalAlignment="Top"/>

                <!-- Speech bubble: border with a TextBox inside so it's the source-of-truth.
                     No explicit Width so it sizes to content up to MaxWidth, and scrolls if too tall. -->
                <Border x:Name="SpeechBorder"
                        Background="White"
                        BorderBrush="Black"
                        BorderThickness="1"
                        CornerRadius="8"
                        Padding="6"
                        Visibility="Collapsed"
                        Canvas.Left="90" Canvas.Top="-10"
                        MaxWidth="320"
                        MinWidth="80"
                        >
                    <TextBox x:Name="SpeechTextBox"
                             TextWrapping="Wrap"
                             AcceptsReturn="True"
                             IsReadOnly="True"
                             BorderThickness="0"
                             Background="Transparent"
                             VerticalScrollBarVisibility="Auto"
                             HorizontalScrollBarVisibility="Disabled"
                             MaxHeight="160"/>
                </Border>
            </Canvas>
        </Canvas>

        <!-- Hidden 'source of truth' textbox removed; SpeechTextBox is authoritative now. -->

        <!-- Buttons (btnMasc is now defunct but left here if you want) -->
        <Button Name="btnMasc"
                Content="Ask AI (defunct)"
                Width="128"
                Height="34"
                HorizontalAlignment="Center"
                VerticalAlignment="Top"
                Margin="0,327,0,0"
                IsEnabled="False" />
        <Button x:Name="btnReport"
                Content="Report Problems"
                Width="128"
                Height="34"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="25,305,0,0"
                Click="btnReport_Click"/>
        <Button x:Name="btnEvents"
                Content="See Events"
                Width="128"
                Height="34"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="25,227,0,0"
                Click="btnEvents_Click"/>
        <Button x:Name="btnRequest"
                Content="Make Service Request"
                Width="128"
                Height="34"
                HorizontalAlignment="Left"
                VerticalAlignment="Top"
                Margin="25,364,0,0"
                Click="btnRequest_Click"/>
    </Grid>
</Window>
